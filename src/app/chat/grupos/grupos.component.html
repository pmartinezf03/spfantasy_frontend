<div class="flex flex-col h-full bg-gray-100 text-gray-800 rounded-xl shadow-lg p-5 border border-gray-300">

  <!-- ğŸ“¢ Encabezado -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold text-fantasyGold">ğŸ“¢ Grupos</h2>
  </div>

  <!-- ğŸ“‹ Lista de grupos -->
  <ul class="space-y-3 mb-6 overflow-y-auto flex-1">
    <li
      *ngFor="let grupo of grupos"
      (click)="emitirGrupoSeleccionado(grupo.id)"
      class="p-3 rounded-lg bg-gray-200 hover:bg-gray-300 cursor-pointer transition flex flex-col"
    >
      <div class="flex items-center gap-2 font-semibold text-sm text-gray-900">
        {{ grupo.nombre }}
        <span *ngIf="grupo.nombre.startsWith('liga-')" class="text-xs bg-blue-600 text-white px-2 py-0.5 rounded-full shadow-sm">
          ğŸ€ Liga
        </span>
      </div>
      <p class="text-xs text-gray-600 mt-1">{{ grupo.descripcion }}</p>
    </li>
  </ul>

  <!-- â• Crear grupo (solo admin) -->
  <div *ngIf="esAdmin" class="border-t border-gray-300 pt-4">
    <h3 class="text-lg font-bold mb-4 text-fantasyGold">â• Nuevo Grupo</h3>

    <input
      type="text"
      [(ngModel)]="nuevoGrupo.nombre"
      placeholder="Nombre"
      class="w-full mb-3 px-4 py-2 rounded-lg bg-white text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-fantasyBlue"
    />

    <input
      type="text"
      [(ngModel)]="nuevoGrupo.descripcion"
      placeholder="DescripciÃ³n"
      class="w-full mb-3 px-4 py-2 rounded-lg bg-white text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-fantasyBlue"
    />

    <input
      type="password"
      [(ngModel)]="nuevoGrupo.passwordGrupo"
      placeholder="ContraseÃ±a (opcional)"
      class="w-full mb-3 px-4 py-2 rounded-lg bg-white text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-fantasyBlue"
    />

    <label class="block text-sm font-medium mb-2">Participantes</label>
    <select
      multiple
      [(ngModel)]="nuevoGrupo.participantesIds"
      class="w-full h-28 px-3 py-2 rounded-lg bg-white text-gray-800 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-fantasyBlue mb-4"
    >
      <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{ usuario.username }}</option>
    </select>

    <button
      (click)="crearGrupo()"
      class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg shadow transition"
    >
      Crear
    </button>
  </div>
</div>
