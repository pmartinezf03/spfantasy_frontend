<nav
  class="w-full sticky top-0 z-50 bg-gradient-to-r from-fantasyDark via-black to-fantasyDark shadow-md px-4 py-3 flex items-center justify-between">
  <!-- Logo -->
  <div id="nav-logo" class="flex items-center gap-3 logo-navbar">
    <img src="https://i.imgur.com/YLu7obR.png" alt="Logo" class="h-10 w-auto" />
    <span class="text-xl text-white font-futuristic">SP Fantasy</span>
  </div>

  <!-- BotÃ³n hamburguesa -->
  <button class="md:hidden text-white text-3xl" (click)="menuAbierto = !menuAbierto">
    â˜°
  </button>

  <!-- MenÃº principal (escritorio) -->
  <ul class="hidden md:flex gap-5 text-white font-semibold text-sm uppercase tracking-wide">
    <li id="nav-inicio" class="menu-item-inicio">
      <a routerLink="/" routerLinkActive="text-fantasyGold" [routerLinkActiveOptions]="{ exact: true }">ğŸ  Inicio</a>
    </li>
    <li id="nav-estadisticas"><a routerLink="/estadisticas-liga" routerLinkActive="text-fantasyGold">ğŸ“Š EstadÃ­sticas</a>
    </li>
    <li id="nav-noticias"><a routerLink="/noticias" routerLinkActive="text-fantasyGold">ğŸ“° Noticias</a></li>
    <li *ngIf="isUserLoggedIn" id="nav-mercado"><a routerLink="/mercado" routerLinkActive="text-fantasyGold">ğŸ›’
        Mercado</a></li>
    <li *ngIf="isUserLoggedIn" id="nav-plantilla" class="menu-item-plantilla"><a routerLink="/plantilla"
        routerLinkActive="text-fantasyGold">ğŸ€ Mi Plantilla</a></li>
    <li *ngIf="isUserLoggedIn" id="nav-ligas"><a routerLink="/ligas" routerLinkActive="text-fantasyGold">ğŸ† Ligas</a>
    </li>
    <li *ngIf="isUserLoggedIn" id="nav-chat"><a routerLink="/chat" routerLinkActive="text-fantasyGold">ğŸ’¬ Chat</a></li>
    <li *ngIf="isUserLoggedIn" id="nav-ofertas" class="menu-item-ofertas">
      <a routerLink="/ofertas" routerLinkActive="text-fantasyGold">ğŸ“© Ofertas <span
          *ngIf="tieneOfertasNuevas">ğŸ”´</span></a>
    </li>
    <li *ngIf="isUserLoggedIn" id="nav-comparador"><a routerLink="/comparador" routerLinkActive="text-fantasyGold">ğŸ“ˆ
        Comparador</a></li>
    <li *ngIf="isUserLoggedIn" id="nav-canjear">
      <a routerLink="/canjear-codigo" routerLinkActive="text-fantasyGold">ğŸ Canjear CÃ³digo</a>
    </li>

  </ul>

  <!-- MenÃº mÃ³vil -->
  <div *ngIf="menuAbierto"
    class="absolute top-full left-0 w-full bg-black text-white p-4 flex flex-col gap-2 font-semibold uppercase text-sm md:hidden transition-all duration-300">
    <a class="menu-item-inicio" routerLink="/" (click)="menuAbierto = false">ğŸ  Inicio</a>
    <a routerLink="/estadisticas-liga" (click)="menuAbierto = false">ğŸ“Š EstadÃ­sticas</a>
    <a routerLink="/noticias" (click)="menuAbierto = false">ğŸ“° Noticias</a>
    <a *ngIf="isUserLoggedIn" routerLink="/mercado" (click)="menuAbierto = false">ğŸ›’ Mercado</a>
    <a *ngIf="isUserLoggedIn" class="menu-item-plantilla" routerLink="/plantilla" (click)="menuAbierto = false">ğŸ€ Mi
      Plantilla</a>
    <a *ngIf="isUserLoggedIn" routerLink="/ligas" (click)="menuAbierto = false">ğŸ† Ligas</a>
    <a *ngIf="isUserLoggedIn" routerLink="/chat" (click)="menuAbierto = false">ğŸ’¬ Chat</a>
    <a *ngIf="isUserLoggedIn" class="menu-item-ofertas" routerLink="/ofertas" (click)="menuAbierto = false">
      {{ tieneOfertasNuevas ? "ğŸ“© Ofertas ğŸ”´" : "ğŸ“© Ofertas" }}
    </a>
    <a *ngIf="isUserLoggedIn" routerLink="/comparador" (click)="menuAbierto = false">ğŸ“ˆ Comparador</a>
    <a *ngIf="isUserLoggedIn" routerLink="/canjear-codigo" (click)="menuAbierto = false">ğŸ Canjear CÃ³digo</a>

    <a *ngIf="isUserLoggedIn" routerLink="/perfil" (click)="menuAbierto = false">ğŸ‘¤ Mi Perfil</a>

    <button *ngIf="!isUserLoggedIn" (click)="reiniciarSesion(); menuAbierto = false"
      class="bg-fantasyBlue hover:bg-fantasyGold text-white font-bold py-2 px-4 rounded-md shadow mt-2">Iniciar
      SesiÃ³n</button>

    <button *ngIf="isUserLoggedIn" (click)="logout(); menuAbierto = false"
      class="bg-red-600 hover:bg-red-400 text-white font-bold py-2 px-4 rounded-md shadow mt-2">Cerrar SesiÃ³n</button>
  </div>

  <!-- Usuario o Login (escritorio) -->
  <div *ngIf="isUserLoggedIn && usuarioLogueado"
    class="hidden md:flex flex-col text-right text-white text-sm font-semibold items-end">
    <div id="nav-avatar" class="flex items-center gap-2 cursor-pointer hover:underline"
      (click)="router.navigate(['/perfil'])">
      <div class="avatar-navbar"
        [ngStyle]="{ 'background-image': 'url(' + (avatarBase64 || 'assets/default-avatar.png') + ')' }">
      </div>
      <span>{{ usuarioLogueado }}</span>
    </div>
    <div class="text-fantasyGold">ğŸ’° {{ usuarioDinero | currency : 'EUR' }}</div>
    <div class="text-xs text-red-400">({{ usuarioDineroPendiente | currency : 'EUR' }} pendientes)</div>
    <div *ngIf="esVip()" class="vip-badge animate__animated animate__pulse animate__infinite">ğŸŒŸ VIP</div>
    <button (click)="logout()" class="mt-1 text-xs text-fantasyRed underline hover:text-red-300 transition-all">Cerrar
      sesiÃ³n</button>
  </div>

  <div *ngIf="!isUserLoggedIn" class="hidden md:block">
    <button (click)="reiniciarSesion()"
      class="text-white font-bold px-4 py-1 bg-fantasyBlue hover:bg-fantasyGold rounded-md shadow transition-all">
      Iniciar SesiÃ³n
    </button>
  </div>
</nav>
