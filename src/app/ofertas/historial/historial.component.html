<div class="historial-wrapper mt-4">
  <div class="mb-3">
    <input type="text" pInputText placeholder="🔍 Buscar jugador..."
           [(ngModel)]="filtroNombre"
           (input)="filtrar()" style="width: 100%; max-width: 400px;" />
  </div>

  <div style="max-height: 500px; overflow-y: auto;">
    <p-table [value]="historialFiltrado" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>Jugador</th>
          <th>Comprador</th>
          <th>Vendedor</th>
          <th>Precio</th>
          <th>Fecha</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData>
        <tr>
          <td>
            <img [src]="rowData.fotoUrl || 'assets/sin-foto.png'" width="32" height="32" class="mr-2" />
            {{ rowData.nombreJugador }}
          </td>
          <td>{{ rowData.compradorUsername || '—' }}</td>
          <td>{{ rowData.vendedorUsername || 'Mercado libre' }}</td>
          <td>{{ rowData.precio | currency:'EUR' }}</td>
          <td>{{ rowData.fecha | date:'short' }}</td>
        </tr>
      </ng-template>
      
    </p-table>
  </div>
</div>
